(this["webpackJsonpfirebase-studio-client"]=this["webpackJsonpfirebase-studio-client"]||[]).push([[0],{65:function(e,t,a){e.exports=a(82)},70:function(e,t,a){},71:function(e,t,a){},80:function(e,t,a){},82:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(33),c=a.n(l),o=(a(70),a(71),a(19)),u=a(11),i=a(85),s=a(22),m=a(58),p=a(84),d=a(20),E=a(13),f=a(17),h=a(9),b=a(5),g=a.n(b),y=a(8),v=a(7),w=a(54),k=a(53),x=a(10),C=a(47),S=a(12),j=a(6),O=a(34),L=a(46);a(80);function P(){return(P=Object(y.a)(g.a.mark((function e(t,a){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:localStorage.setItem("proxySecret",a),localStorage.setItem("proxyAddress",t);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(){return T.apply(this,arguments)}function T(){return(T=Object(y.a)(g.a.mark((function e(){var t,a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,localStorage.getItem("proxySecret");case 2:return t=e.sent,e.next=5,localStorage.getItem("proxyAddress");case 5:return a=e.sent,e.abrupt("return",{url:a,secret:t,isSetup:!!(null===a||void 0===a?void 0:a.length)});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(){return(A=Object(y.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:localStorage.removeItem("proxySecret"),localStorage.removeItem("proxyAddress");case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(e){return R.apply(this,arguments)}function R(){return(R=Object(y.a)(g.a.mark((function e(t){var a,n,r,l,c,o=arguments;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>1&&void 0!==o[1]?o[1]:"get",n=o.length>2&&void 0!==o[2]?o[2]:void 0,e.next=4,I();case 4:return r=e.sent,l=r.url,c=r.secret,e.abrupt("return",fetch("".concat(l,"/").concat(t),{method:a,headers:{secret:c,"Content-Type":"application/json"},body:n?JSON.stringify(n):void 0}).then((function(e){return 401===e.status?alert("The secret token doesn't match the proxy configuration. "):200!==e.status&&alert("Error while requesting ".concat(l,"/").concat(t,": Status ").concat(e.status,".")),e})).then((function(e){return e.json()})));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(e){return F(e)}function G(e,t){return F(e,"post",t)}var N=function(e){return function(){window.confirm("Are you sure you want to delete user ".concat(e," ?"))&&F("user/".concat(e),"delete")}},V=function(e){var t=e.value,a=L.DateTime.fromISO(t);return r.a.createElement("span",{title:a.toLocaleString(L.DateTime.DATETIME_FULL)},a.toLocaleString())},D=[{Header:"Picture",accessor:"photoURL",Cell:function(e){var t=e.value;return!!t&&r.a.createElement("img",{src:t,title:t,alt:t,width:"70",height:"70"})}},{Header:"Name",accessor:"displayName",Cell:function(e){var t=e.row,a=e.value;return r.a.createElement("span",null,r.a.createElement(o.Link,{to:"/user/".concat(t.original.uid)},a)," ",!!t.original.disabled&&"\ud83d\uded1")}},{Header:"Email",accessor:"email",Cell:function(e){var t=e.row,a=e.value;return r.a.createElement("span",null,a," ",!!t.original.emailVerified&&"\u2705")}},{Header:"Signin",accessor:"creationTime",Cell:V},{Header:"Last seen",accessor:"lastSignInTime",Cell:V},{Header:"Custom claims",accessor:"claims",Cell:function(e){var t=e.row,a=e.value;return r.a.createElement(r.a.Fragment,null,!!a&&r.a.createElement("ul",{className:"claimList"},Object.keys(a).map((function(e){return r.a.createElement("li",null,r.a.createElement("strong",null,"".concat(e)),": ".concat(a[e]))}))),r.a.createElement(o.Link,{to:"/claims/".concat(t.original.uid)},"Edit"))}},{Header:"Firebase UID",accessor:"uid"},{Header:"Providers",accessor:"providers",Cell:function(e){var t=e.value;return!!(null===t||void 0===t?void 0:t.length)&&t.map((function(e){switch(e.providerId){case"password":return r.a.createElement(h.g,{title:"Password"});case"google.com":return r.a.createElement(h.d,{title:"Google"});case"facebook.com":return r.a.createElement(h.c,{title:"Facebook"});case"apple.com":return r.a.createElement(h.a,{title:"Apple"});case"linkedin.com":return r.a.createElement(h.f,{title:"LinkedIn"});default:return r.a.createElement(h.e,{title:"Unknown"})}}))}},{Header:"Actions",Cell:function(e){var t=e.row;return r.a.createElement(C.a,{className:"buttonsWithIcons"},r.a.createElement(f.LinkContainer,{to:"/user/".concat(t.original.uid)},r.a.createElement(x.a,null,r.a.createElement(h.b,{title:"Edit"}))),r.a.createElement(x.a,{onClick:N(t.original.uid)},r.a.createElement(h.k,{title:"Delete"})),r.a.createElement(x.a,{onClick:(t.original.uid,function(){return alert("Not yet implemented")})},r.a.createElement(h.h,{title:"Disable"})))}}],H=function(e){var t=e.data,a=e.onFetch,n=Object(O.useTable)({columns:D,data:t},O.useGlobalFilter,O.useSortBy,O.usePagination),l=n.getTableProps,c=n.headers,o=n.page,u=n.canPreviousPage,i=n.canNextPage,s=n.pageOptions,m=n.pageCount,p=n.gotoPage,d=n.nextPage,E=n.previousPage,f=n.setPageSize,b=n.state,g=b.pageIndex,y=b.pageSize,L=b.globalFilter,P=n.prepareRow,I=n.preGlobalFilteredRows,T=n.setGlobalFilter,A=I.length,F=r.a.useState(L),R=Object(v.a)(F,2),U=R[0],G=R[1],N=Object(O.useAsyncDebounce)((function(e){T(e||void 0)}),200);return r.a.createElement(r.a.Fragment,null,r.a.createElement(k.a,{className:"justify-content-between"},r.a.createElement(S.a,null,r.a.createElement(S.a.Prepend,null,r.a.createElement(S.a.Text,{id:"btnGroupAddon2"},"Search")),r.a.createElement(j.a.Control,{type:"text",value:U||"",onChange:function(e){G(e.target.value),N(e.target.value)},placeholder:"".concat(A," records...")})),a&&r.a.createElement(x.a,{onClick:a},r.a.createElement(h.j,null)," Refresh"),r.a.createElement(C.a,null,r.a.createElement(x.a,{onClick:function(){return p(0)},disabled:!u},"<<"),r.a.createElement(x.a,{onClick:function(){return E()},disabled:!u},"<"),r.a.createElement(x.a,{onClick:function(){return d()},disabled:!i},">"),r.a.createElement(x.a,{onClick:function(){return p(m-1)},disabled:!i},">>")),r.a.createElement(S.a,null,r.a.createElement(S.a.Prepend,null,r.a.createElement(S.a.Text,{id:"btnGroupAddon2"},"Page ",g+1," of ",s.length)),r.a.createElement(j.a.Control,{as:"select",value:y,onChange:function(e){f(Number(e.target.value))}},[10,20,50,100].map((function(e){return r.a.createElement("option",{key:e,value:e},"Show ",e)}))))),r.a.createElement(w.a,Object.assign({striped:!0,bordered:!0,hover:!0,size:"sm"},l()),r.a.createElement("thead",null,c.map((function(e){return r.a.createElement("th",e.getHeaderProps(e.getSortByToggleProps()),e.render("Header"),r.a.createElement("span",null,e.isSorted?e.isSortedDesc?" \ud83d\udd3d":" \ud83d\udd3c":""))}))),r.a.createElement("tbody",null,o.map((function(e,t){return P(e),r.a.createElement("tr",e.getRowProps(),e.cells.map((function(e){return r.a.createElement("td",e.getCellProps(),e.render("Cell"))})))})))))},_=a(31),B=function(e){var t=e.flash,a=t.success,n=t.error;return a||n?r.a.createElement(_.a,{variant:a?"success":"warning"},a||n):null},q=function(){var e=Object(n.useState)([]),t=Object(v.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)({}),o=Object(v.a)(c,2),u=o[0],i=o[1];function m(){return p.apply(this,arguments)}function p(){return(p=Object(y.a)(g.a.mark((function e(){var t,a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U("user/list");case 2:t=e.sent,a=t.users,l(a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(n.useEffect)((function(){I().then((function(e){return e.isSetup?m():i({error:"You didn't setup yur proxy. Use the Setup Proxy button in the upper right corner."})}))}),[]),r.a.createElement(s.a,{fluid:!0},r.a.createElement(d.a,null,r.a.createElement(E.a,null,u.error?r.a.createElement(B,{flash:u}):r.a.createElement(H,{data:a,onFetch:m}))))},W=a(40),z=function(){var e=Object(n.useState)({}),t=Object(v.a)(e,2),a=t[0],l=t[1],c=Object(W.a)(),o=c.register,u=c.handleSubmit,i=c.setValue;return Object(n.useEffect)((function(){I().then((function(e){var t=e.url,a=e.secret;i("proxyAddress",t),i("proxySecret",a)}))}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(s.a,{fluid:!0},r.a.createElement(d.a,null,r.a.createElement(E.a,null,r.a.createElement("h2",null,"Setup proxy"),r.a.createElement(j.a,{onSubmit:u((function(e){var t=e.proxyAddress,a=e.proxySecret;fetch("".concat(t,"/ping")).then((function(e){return e.json()})).then((function(){return function(e,t){return P.apply(this,arguments)}(t,a).then((function(){return l({success:"Config stored !"})}))})).catch((function(){return l({error:"Cannot connect to your proxy on ".concat(t,". Is it running ?")})}))}))},r.a.createElement(j.a.Group,{controlId:"proxy-address"},r.a.createElement(j.a.Label,null,"Proxy Address"),r.a.createElement(S.a,null,r.a.createElement(j.a.Control,{type:"text",name:"proxyAddress",placeholder:"http://localhost:8080",ref:o,required:!0}),r.a.createElement(S.a.Append,null,r.a.createElement(S.a.Text,null,"://")))),r.a.createElement(j.a.Group,{controlId:"proxy-secret"},r.a.createElement(j.a.Label,null,"Proxy secret token"),r.a.createElement(j.a.Control,{type:"password",name:"proxySecret",placeholder:"",ref:o})),r.a.createElement(x.a,{variant:"primary",type:"submit"},"Store config"))),r.a.createElement(E.a,{lg:"4"},r.a.createElement(x.a,{variant:"danger",onClick:function(){!function(){A.apply(this,arguments)}(),i("proxyAddress",""),i("proxySecret",""),l({success:"Config cleared !"})},style:{color:"black"}},r.a.createElement(h.k,null)," Clear config"),r.a.createElement(B,{flash:a}),r.a.createElement(_.a,{variant:"info"},r.a.createElement("p",null,"Install a ",r.a.createElement("a",{href:"https://github.com/Gp2mv3/firebase-studio",target:"_blank"},"Firebase Studio proxy")," and configure it with your ",r.a.createElement("a",{href:"https://firebase.google.com/docs/admin/setup#initialize-sdk",target:"_blank"},"Firebase Admin credentials"),"."),r.a.createElement("p",null,"Your proxy has to be accessible by your browser. Requests are sent directly to the URL. If your proxy is exposed to the web, use a strong secret key to ensure security and change it regularly."),r.a.createElement("p",null,"Your setup is stored in your browser (in ",r.a.createElement("a",{href:"https://developer.mozilla.org/en-US/docs/Web/API/Window/localStorage",target:"_blank"}," localStorage"),")."))))))},J=a(62),M=a(57),Y=a.n(M),K=function(){var e=Object(u.m)().id,t=Object(n.useState)({}),a=Object(v.a)(t,2),l=a[0],c=a[1],o=Object(n.useState)(!1),i=Object(v.a)(o,2),m=i[0],p=i[1],b=Object(n.useState)({}),w=Object(v.a)(b,2),k=w[0],C=w[1],S=Object(n.useState)({}),j=Object(v.a)(S,2),O=j[0],L=j[1];function P(){return I.apply(this,arguments)}function I(){return(I=Object(y.a)(g.a.mark((function t(){var a,n;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,U("user/".concat(e));case 2:a=t.sent,n=a.user.claims,c(n),console.log(n);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function T(){return(T=Object(y.a)(g.a.mark((function t(){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return p(!1),t.prev=1,t.next=4,G("user/".concat(e,"/claims"),{claims:k});case 4:L({success:"Claims updated !"}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),L({error:t.t0.message});case 10:case"end":return t.stop()}}),t,null,[[1,7]])})))).apply(this,arguments)}function A(){return(A=Object(y.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.error||!t.jsObject){e.next=3;break}return p(!0),e.abrupt("return",C(t.jsObject));case 3:p(!1);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(n.useEffect)((function(){P()}),[e]),r.a.createElement(s.a,{fluid:!0},r.a.createElement(d.a,null,r.a.createElement(E.a,null,r.a.createElement(f.LinkContainer,{exact:!0,to:"/list"},r.a.createElement(x.a,null,r.a.createElement(h.i,null)," Back to list")),r.a.createElement("h2",null,"Edit custom claims"),r.a.createElement(J.a,{id:"claimEditor",theme:"light_mitsuketa_tribute",placeholder:l,locale:Y.a,height:"200px",width:"100%",onKeyPressUpdate:!1,onChange:function(e){return A.apply(this,arguments)}}),r.a.createElement(x.a,{onClick:function(){return T.apply(this,arguments)},disabled:!m},"Update claims")),r.a.createElement(E.a,{lg:"4"},r.a.createElement(x.a,{onClick:P},r.a.createElement(h.j,null)," Refresh form "),r.a.createElement(f.LinkContainer,{to:"/user/".concat(e)},r.a.createElement(x.a,null,r.a.createElement(h.n,null)," Edit user")),r.a.createElement(B,{flash:O}),r.a.createElement(_.a,{variant:"info"},r.a.createElement("p",null,"Set ",r.a.createElement("a",{href:"https://firebase.google.com/docs/auth/admin/custom-claims",target:"_blank"},"Custom Claims")," with this editor."),r.a.createElement("p",null,"Custom Claims cannot exceed 1000 bytes."),r.a.createElement("p",null,"Updating custom claims overrides the complete object and is irreversible.")))))},$=a(63),Q=function(){var e=Object(u.m)().id,t=Object(n.useState)(void 0),a=Object(v.a)(t,2),l=a[0],c=a[1],o=Object(n.useState)(!1),i=Object(v.a)(o,2),m=i[0],p=i[1],b=Object(n.useState)({}),w=Object(v.a)(b,2),k=w[0],C=w[1],O=Object(W.a)(),L=O.register,P=O.handleSubmit,I=O.watch,T=O.errors;function A(){return F.apply(this,arguments)}function F(){return(F=Object(y.a)(g.a.mark((function t(){var a,n;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,U("user/".concat(e));case 2:a=t.sent,n=a.user,console.log({user:n}),c(n),p(!0);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var R=function(){var t=Object(y.a)(g.a.mark((function t(a){var n,r;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.sendVerificationEmail,a.askPasswordReset,a.passwordCheck,r=Object($.a)(a,["sendVerificationEmail","askPasswordReset","passwordCheck"]),p(!1),t.prev=2,t.next=5,G("user/".concat(e),{user:r,sendVerificationEmail:n});case 5:C({success:"User updated !"}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(2),C({error:t.t0.message});case 11:p(!0);case 12:case"end":return t.stop()}}),t,null,[[2,8]])})));return function(e){return t.apply(this,arguments)}}();return Object(n.useEffect)((function(){A()}),[e]),r.a.createElement(s.a,{fluid:!0},r.a.createElement(d.a,null,r.a.createElement(E.a,null,r.a.createElement(f.LinkContainer,{exact:!0,to:"/list"},r.a.createElement(x.a,null,r.a.createElement(h.i,null)," Back to list")),r.a.createElement("h2",null,"Edit user info"),!!l&&r.a.createElement(j.a,{onSubmit:P(R)},r.a.createElement(j.a.Group,{controlId:"displayName"},r.a.createElement(j.a.Label,null,"Display Name"),r.a.createElement(j.a.Control,{type:"text",placeholder:"Display Name",defaultValue:l.displayName,name:"displayName",ref:L})),r.a.createElement(j.a.Group,{controlId:"email"},r.a.createElement(j.a.Label,null,"Email address"),r.a.createElement(S.a,null,r.a.createElement(j.a.Control,{type:"email",placeholder:"Email address",defaultValue:l.email,name:"email",ref:L}),r.a.createElement(S.a.Append,null,r.a.createElement(S.a.Text,null,"@"))),r.a.createElement(j.a.Check,{type:"checkbox",label:"Verified email address",name:"emailVerified",defaultChecked:l.emailVerified,ref:L,style:{}})),r.a.createElement(j.a.Group,{controlId:"phone"},r.a.createElement(j.a.Label,null,"Phone number"),r.a.createElement(S.a,null,r.a.createElement(j.a.Control,{type:"tel",placeholder:"Phone number",defaultValue:l.phoneNumber,name:"phoneNumber",ref:L}),r.a.createElement(S.a.Append,null,r.a.createElement(S.a.Text,null,"#")))),r.a.createElement(j.a.Group,{controlId:"photoURL"},r.a.createElement(j.a.Label,null,"Photo URL"),r.a.createElement(S.a,null,r.a.createElement(j.a.Control,{type:"url",placeholder:"Photo URL",defaultValue:l.photoURL,name:"photoURL",ref:L}),r.a.createElement(S.a.Append,null,r.a.createElement(S.a.Text,null,"://")))),r.a.createElement("hr",null),r.a.createElement(j.a.Group,{controlId:"password"},r.a.createElement(j.a.Label,null,"New password"),r.a.createElement(d.a,null,r.a.createElement(E.a,null,r.a.createElement(j.a.Control,{type:"password",placeholder:"Password",name:"password",ref:L})),r.a.createElement(E.a,null,r.a.createElement(j.a.Control,{type:"password",placeholder:"Repeat password",name:"passwordCheck",ref:L({validate:function(e){return e===I("password")}})})))),r.a.createElement(j.a.Group,{controlId:"photoURL"},r.a.createElement(j.a.Label,null,"Disable user"),r.a.createElement(j.a.Check,{type:"checkbox",label:"User is disabld (Cannot use your app while disabled)",name:"disabled",defaultChecked:l.disabled,ref:L})),T.exampleRequired&&r.a.createElement("span",null,"This field is required"),r.a.createElement(x.a,{type:"submit",disabled:!m},"Update user"))),r.a.createElement(E.a,{lg:"4"},r.a.createElement(x.a,{onClick:A},r.a.createElement(h.j,null)," Refresh form"),r.a.createElement(f.LinkContainer,{to:"/claims/".concat(e)},r.a.createElement(x.a,null,r.a.createElement(h.o,null)," Custom claims")),r.a.createElement(B,{flash:k}),r.a.createElement(_.a,{variant:"info"},r.a.createElement("p",null,"All user properties are optional."),r.a.createElement("p",null,"If a certain property is not specified (field is empty), the value for that property will be deleted."),r.a.createElement("p",null,"Old values are lost after you update a user.")))))},X=function(){var e=Object(n.useState)(!1),t=Object(v.a)(e,2),a=t[0],l=t[1];return Object(n.useEffect)((function(){I().then((function(e){var t=e.isSetup;return l(t)}))}),[]),a?r.a.createElement(u.c,{to:"/list"}):r.a.createElement(s.a,{fluid:!0},r.a.createElement(d.a,null,r.a.createElement(E.a,null,r.a.createElement("h2",null,"Welcome to Firebase Studion"),r.a.createElement("p",null,"Firebase Studio is composed of two components:",r.a.createElement("ul",null,r.a.createElement("li",null,"The Client (in your browser, actually, you are in front of it)"),r.a.createElement("li",null,"The Proxy (backend connected to your Firebase account)"))),r.a.createElement("p",null,"To use Firebase Studio, you need to setup the proxy on your server or locally. The proxy will connect to Firebase, using your Firebase Credentials and will proxy requests from the Client."),r.a.createElement("p",null,"To setup your proxy, follow the guide in the"," ",r.a.createElement("a",{href:"https://github.com/Gp2mv3/firebase-studio",target:"_blank"},"Firebase Studio doc"),", then ",r.a.createElement(o.Link,{to:"/setup"},"configure it in the client"),"."))))};var Z=function(){return r.a.createElement(o.BrowserRouter,null,r.a.createElement("div",{id:"wrapper"},r.a.createElement("div",{id:"content-wrapper",class:"d-flex flex-column"},r.a.createElement("div",{id:"content"},r.a.createElement(i.a,{bg:"primary",variant:"dark"},r.a.createElement(s.a,null,r.a.createElement(f.LinkContainer,{to:"/"},r.a.createElement(m.a,null,"Firebase Studio")),r.a.createElement(p.a,null,r.a.createElement(f.LinkContainer,{to:"/list",exact:!0},r.a.createElement(p.a.Link,null,r.a.createElement(h.m,null)," User list"))),r.a.createElement(p.a,{className:"mr-auto"}),r.a.createElement(p.a,null,r.a.createElement(f.LinkContainer,{to:"/setup",exact:!0},r.a.createElement(p.a.Link,null,r.a.createElement(h.l,null)," Setup Proxy"))))),r.a.createElement(s.a,{id:"mainPageContainer"},r.a.createElement(u.g,null,r.a.createElement(u.d,{path:"/setup"},r.a.createElement(z,null)),r.a.createElement(u.d,{path:"/user/:id"},r.a.createElement(Q,null)),r.a.createElement(u.d,{path:"/claims/:id"},r.a.createElement(K,null)),r.a.createElement(u.d,{path:"/list"},r.a.createElement(q,null)),r.a.createElement(u.d,{path:"/"},r.a.createElement(X,null))))),r.a.createElement("footer",{class:"sticky-footer"},r.a.createElement(s.a,{className:"text-center my-auto"},r.a.createElement(d.a,null,r.a.createElement(E.a,null,r.a.createElement("hr",null),r.a.createElement("span",null,"Made by"," ",r.a.createElement("a",{href:"https://gp2mv3.com",target:"_blank"},"Gp2mv3")," ","- The code is on"," ",r.a.createElement("a",{href:"https://github.com/Gp2mv3/firebase-studio",target:"_blank"},"Github")))))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Z,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[65,1,2]]]);
//# sourceMappingURL=main.39a5609c.chunk.js.map